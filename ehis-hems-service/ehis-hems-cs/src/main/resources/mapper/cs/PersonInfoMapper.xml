<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.paic.ehis.cs.mapper.PersonInfoMapper">
    
    <resultMap type="com.paic.ehis.cs.domain.PersonInfo" id="PersonInfoResult">
        <result property="personId"    column="person_id"    />
        <result property="name"    column="name"    />
        <result property="sex"    column="sex"    />
        <result property="identity"    column="identity"    />
        <result property="mobilePhone"    column="mobile_phone"    />
        <result property="linePhone"    column="line_phone"    />
        <result property="homePhone"    column="home_phone"    />
        <result property="workPhone"    column="work_phone"    />
        <result property="language"    column="language"    />
        <result property="email"    column="email"    />
        <result property="idNumber"    column="id_number"    />
        <result property="idType"    column="id_type"    />
        <result property="birthday"    column="birthday"    />
        <result property="country"    column="country"    />
        <result property="province"    column="province"    />
        <result property="city"    column="city"    />
        <result property="district"    column="district"    />
        <result property="address"    column="address"    />
        <result property="otherCustomerNo"    column="other_customer_no"    />
        <result property="createdBy"    column="created_by"    />
        <result property="createdTime"    column="created_time"    />
        <result property="updatedBy"    column="updated_by"    />
        <result property="updatedTime"    column="updated_time"    />
    </resultMap>

    <sql id="selectPersonInfoVo">
        select person_id, name, sex, identity, mobile_phone, line_phone, home_phone, work_phone, language, email, id_number,
               id_type, birthday, country, province, city, district, address, other_customer_no, created_by, created_time, updated_by, updated_time from person_info
    </sql>

    <select id="selectPersonInfoList" parameterType="com.paic.ehis.cs.domain.PersonInfo" resultMap="PersonInfoResult">
        <include refid="selectPersonInfoVo"/>
        <where>  
            <if test="name != null  and name != ''"> and name like concat('%', #{name}, '%')</if>
            <if test="sex != null "> and sex = #{sex}</if>
            <if test="identity != null  and identity != ''"> and identity = #{identity}</if>
            <if test="mobilePhone != null  and mobilePhone != ''"> and mobile_phone = #{mobilePhone}</if>
            <if test="linePhone != null  and linePhone != ''"> and line_phone = #{linePhone}</if>
            <if test="homePhone != null  and homePhone != ''"> and home_phone = #{homePhone}</if>
            <if test="workPhone != null  and workPhone != ''"> and work_phone = #{workPhone}</if>
            <if test="language != null  and language != ''"> and language = #{language}</if>
            <if test="email != null  and email != ''"> and email = #{email}</if>
            <if test="idNumber != null  and idNumber != ''"> and id_number = #{idNumber}</if>
            <if test="idType != null  and idType != ''"> and id_type = #{idType}</if>
            <if test="birthday != null "> and birthday = #{birthday}</if>
            <if test="country != null  and country != ''"> and country = #{country}</if>
            <if test="province != null  and province != ''"> and province = #{province}</if>
            <if test="city != null  and city != ''"> and city = #{city}</if>
            <if test="district != null  and district != ''"> and district = #{district}</if>
            <if test="address != null  and address != ''"> and address = #{address}</if>
            <if test="otherCustomerNo != null  and otherCustomerNo != ''"> and other_customer_no = #{otherCustomerNo}</if>
            <if test="createdBy != null  and createdBy != ''"> and created_by = #{createdBy}</if>
            <if test="createdTime != null "> and created_time = #{createdTime}</if>
            <if test="updatedBy != null  and updatedBy != ''"> and updated_by = #{updatedBy}</if>
            <if test="updatedTime != null "> and updated_time = #{updatedTime}</if>
        </where>
    </select>
    
    <select id="selectPersonInfoById" parameterType="String" resultMap="PersonInfoResult">
        <include refid="selectPersonInfoVo"/>
        where person_id = #{personId}
    </select>
        
    <insert id="insertPersonInfo" parameterType="com.paic.ehis.cs.domain.PersonInfo">
        insert into person_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="personId != null">person_id,</if>
            <if test="name != null and name != ''">name,</if>
            <if test="sex != null">sex,</if>
            <if test="identity != null">identity,</if>
            <if test="mobilePhone != null">mobile_phone,</if>
            <if test="linePhone != null">line_phone,</if>
            <if test="homePhone != null">home_phone,</if>
            <if test="workPhone != null">work_phone,</if>
            <if test="language != null">language,</if>
            <if test="email != null">email,</if>
            <if test="idNumber != null">id_number,</if>
            <if test="idType != null">id_type,</if>
            <if test="birthday != null">birthday,</if>
            <if test="country != null">country,</if>
            <if test="province != null">province,</if>
            <if test="city != null">city,</if>
            <if test="district != null">district,</if>
            <if test="address != null">address,</if>
            <if test="otherCustomerNo != null">other_customer_no,</if>
            <if test="createdBy != null and createdBy != ''">created_by,</if>
            <if test="createdTime != null">created_time,</if>
            <if test="updatedBy != null and updatedBy != ''">updated_by,</if>
            <if test="updatedTime != null">updated_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="personId != null">#{personId},</if>
            <if test="name != null and name != ''">#{name},</if>
            <if test="sex != null">#{sex},</if>
            <if test="identity != null">#{identity},</if>
            <if test="mobilePhone != null">#{mobilePhone},</if>
            <if test="linePhone != null">#{linePhone},</if>
            <if test="homePhone != null">#{homePhone},</if>
            <if test="workPhone != null">#{workPhone},</if>
            <if test="language != null">#{language},</if>
            <if test="email != null">#{email},</if>
            <if test="idNumber != null">#{idNumber},</if>
            <if test="idType != null">#{idType},</if>
            <if test="birthday != null">#{birthday},</if>
            <if test="country != null">#{country},</if>
            <if test="province != null">#{province},</if>
            <if test="city != null">#{city},</if>
            <if test="district != null">#{district},</if>
            <if test="address != null">#{address},</if>
            <if test="otherCustomerNo != null">#{otherCustomerNo},</if>
            <if test="createdBy != null and createdBy != ''">#{createdBy},</if>
            <if test="createdTime != null">#{createdTime},</if>
            <if test="updatedBy != null and updatedBy != ''">#{updatedBy},</if>
            <if test="updatedTime != null">#{updatedTime},</if>
         </trim>
    </insert>

    <update id="updatePersonInfo" parameterType="com.paic.ehis.cs.domain.PersonInfo">
        update person_info
        <trim prefix="SET" suffixOverrides=",">
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="sex != null">sex = #{sex},</if>
            <if test="identity != null">identity = #{identity},</if>
            <if test="mobilePhone != null">mobile_phone = #{mobilePhone},</if>
            <if test="linePhone != null">line_phone = #{linePhone},</if>
            <if test="homePhone != null">home_phone = #{homePhone},</if>
            <if test="workPhone != null">work_phone = #{workPhone},</if>
            <if test="language != null">language = #{language},</if>
            <if test="email != null">email = #{email},</if>
            <if test="idNumber != null">id_number = #{idNumber},</if>
            <if test="idType != null">id_type = #{idType},</if>
            <if test="birthday != null">birthday = #{birthday},</if>
            <if test="country != null">country = #{country},</if>
            <if test="province != null">province = #{province},</if>
            <if test="city != null">city = #{city},</if>
            <if test="district != null">district = #{district},</if>
            <if test="address != null">address = #{address},</if>
            <if test="otherCustomerNo != null">other_customer_no = #{otherCustomerNo},</if>
            <if test="createdBy != null and createdBy != ''">created_by = #{createdBy},</if>
            <if test="createdTime != null">created_time = #{createdTime},</if>
            <if test="updatedBy != null and updatedBy != ''">updated_by = #{updatedBy},</if>
            <if test="updatedTime != null">updated_time = #{updatedTime},</if>
        </trim>
        where person_id = #{personId}
    </update>

    <delete id="deletePersonInfoById" parameterType="String">
        delete from person_info where person_id = #{personId}
    </delete>

    <delete id="deletePersonInfoByIds" parameterType="String">
        delete from person_info where person_id in 
        <foreach item="personId" collection="array" open="(" separator="," close=")">
            #{personId}
        </foreach>
    </delete>
    
</mapper>