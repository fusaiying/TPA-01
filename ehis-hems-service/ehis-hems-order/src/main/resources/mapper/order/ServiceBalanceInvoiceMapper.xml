<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.paic.ehis.order.mapper.ServiceBalanceInvoiceMapper">
    
    <resultMap type="ServiceBalanceInvoice" id="ServiceBalanceInvoiceResult">
        <result property="serialNo"    column="serial_no"    />
        <result property="taskNo"    column="task_no"    />
        <result property="status"    column="status"    />
        <result property="invoiceType"    column="invoice_type"    />
        <result property="invoiceCode"    column="invoice_code"    />
        <result property="invoiceNo"    column="invoice_no"    />
        <result property="amount"    column="amount"    />
        <result property="amountTax"    column="amount_tax"    />
        <result property="tax"    column="tax"    />
        <result property="auth"    column="auth"    />
        <result property="invoiceDate"    column="invoice_date"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectServiceBalanceInvoiceVo">
        select serial_no, task_no, status, invoice_type, invoice_code, invoice_no, amount, amount_tax, tax, auth, invoice_date, create_by, create_time, update_by, update_time from service_balance_invoice
    </sql>

    <select id="selectServiceBalanceInvoiceList" parameterType="ServiceBalanceInvoice" resultMap="ServiceBalanceInvoiceResult">
        <include refid="selectServiceBalanceInvoiceVo"/>
        <where>  
            <if test="taskNo != null  and taskNo != ''"> and task_no = #{taskNo}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
            <if test="invoiceType != null  and invoiceType != ''"> and invoice_type = #{invoiceType}</if>
            <if test="invoiceCode != null  and invoiceCode != ''"> and invoice_code = #{invoiceCode}</if>
            <if test="invoiceNo != null  and invoiceNo != ''"> and invoice_no = #{invoiceNo}</if>
            <if test="amount != null "> and amount = #{amount}</if>
            <if test="amountTax != null "> and amount_tax = #{amountTax}</if>
            <if test="tax != null "> and tax = #{tax}</if>
            <if test="auth != null  and auth != ''"> and auth = #{auth}</if>
            <if test="invoiceDate != null "> and invoice_date = #{invoiceDate}</if>
        </where>
    </select>
    
    <select id="selectServiceBalanceInvoiceById" parameterType="Long" resultMap="ServiceBalanceInvoiceResult">
        <include refid="selectServiceBalanceInvoiceVo"/>
        where serial_no = #{serialNo}
    </select>
        
    <insert id="insertServiceBalanceInvoice" parameterType="ServiceBalanceInvoice" useGeneratedKeys="true" keyProperty="serialNo">
        insert into service_balance_invoice
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="taskNo != null and taskNo != ''">task_no,</if>
            <if test="status != null">status,</if>
            <if test="invoiceType != null">invoice_type,</if>
            <if test="invoiceCode != null">invoice_code,</if>
            <if test="invoiceNo != null">invoice_no,</if>
            <if test="amount != null">amount,</if>
            <if test="amountTax != null">amount_tax,</if>
            <if test="tax != null">tax,</if>
            <if test="auth != null">auth,</if>
            <if test="invoiceDate != null">invoice_date,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="taskNo != null and taskNo != ''">#{taskNo},</if>
            <if test="status != null">#{status},</if>
            <if test="invoiceType != null">#{invoiceType},</if>
            <if test="invoiceCode != null">#{invoiceCode},</if>
            <if test="invoiceNo != null">#{invoiceNo},</if>
            <if test="amount != null">#{amount},</if>
            <if test="amountTax != null">#{amountTax},</if>
            <if test="tax != null">#{tax},</if>
            <if test="auth != null">#{auth},</if>
            <if test="invoiceDate != null">#{invoiceDate},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateServiceBalanceInvoice" parameterType="ServiceBalanceInvoice">
        update service_balance_invoice
        <trim prefix="SET" suffixOverrides=",">
            <if test="taskNo != null and taskNo != ''">task_no = #{taskNo},</if>
            <if test="status != null">status = #{status},</if>
            <if test="invoiceType != null">invoice_type = #{invoiceType},</if>
            <if test="invoiceCode != null">invoice_code = #{invoiceCode},</if>
            <if test="invoiceNo != null">invoice_no = #{invoiceNo},</if>
            <if test="amount != null">amount = #{amount},</if>
            <if test="amountTax != null">amount_tax = #{amountTax},</if>
            <if test="tax != null">tax = #{tax},</if>
            <if test="auth != null">auth = #{auth},</if>
            <if test="invoiceDate != null">invoice_date = #{invoiceDate},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where serial_no = #{serialNo}
    </update>

    <delete id="deleteServiceBalanceInvoiceById" parameterType="Long">
        delete from service_balance_invoice where serial_no = #{serialNo}
    </delete>

    <delete id="deleteServiceBalanceInvoiceByIds" parameterType="String">
        delete from service_balance_invoice where serial_no in 
        <foreach item="serialNo" collection="array" open="(" separator="," close=")">
            #{serialNo}
        </foreach>
    </delete>
    
</mapper>